<!DOCTYPE html>
<html style="height: 100%">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Snippetbucket.com | Backbone.js Editor</title>
        
        <link rel="stylesheet" href="./static/libs/gridsterjs/jquery.gridster.min.css">
        <link rel="stylesheet" href="./static/css/app.css">
        
        
        <script type="text/javascript" src="./static/libs/jquery-1.9.0.js"></script>
        <script type="text/javascript" src="./static/libs/json2.js"></script>
        <script type="text/javascript" src="./static/libs/underscore.js"></script>
        <script type="text/javascript" src="./static/libs/backbone.js"></script>
        <script type="text/javascript" src="./static/libs/gridsterjs/jquery.gridster.min.js"></script>
        <script type="text/javascript" src="./static/libs/gridsterjs/jquery.gridster.with-extras.min.js"></script>
        
        <!-- qweb most recommanded file to html templating file. -->    
        <script type="text/javascript" src="./static/libs/qweb.js"></script>
        <script type="text/javascript" src="./static/js/app.js"></script>
        
        <script type="text/javascript">
            QWeb.add_template("./static/xml/template.xml");
        </script>
        <script type="text/javascript">
           var gridster = null;
           function _lite_bind(){
                gridster = $(".gridster ul").gridster({
                    widget_margins: [10, 10],
                    widget_base_dimensions: [140, 140]
                }).data('gridster');
                
                $('li.gs-w .remove_it').on( "click", function () {
                    gridster.remove_widget( $(this).parent() );
                });
                    
               $('li.gs-w .duplicate_it').on( "click", function () {
                    var code = $(this).parent().html().replace(/^\s+|\s+$/g, '');
                    console.log(code);
                    gridster.add_widget("<li>"+code+"</li>", 3, 1);
                    //_lite_bind();
                });

           }
           $(function() {
               _lite_bind();
               
           });
           
           window.onerror = function(message, url, linenumber) {
              console.log("message: ", message);
              alert("JavaScript error: " + message + " on line " + linenumber + " for " + url);
           }
           
        </script>
    </head>
    <body>
        
        <div class="box" id="box1"></div>
        <div class="gridster">
            <ul>
                <li data-row="1" data-col="1" data-sizex="3" data-sizey="1">
                    <div class="duplicate_it"></div>
                    <div class="remove_it"></div>
                    <textarea>SnippetBucket.com, ERP / Web Business complete solution.</textarea>
                </li>
                
                <li data-row="1" data-col="1" data-sizex="3" data-sizey="1">
                    <div class="duplicate_it"></div>
                    <div class="remove_it"></div>
                    <textarea></textarea>
                </li>
                
                <li data-row="1" data-col="1" data-sizex="3" data-sizey="1">
                    <div class="duplicate_it"></div>
                    <div class="remove_it"></div>
                    <textarea></textarea>
                </li>
                
            </ul>
        </div>
    </body>
</html>

